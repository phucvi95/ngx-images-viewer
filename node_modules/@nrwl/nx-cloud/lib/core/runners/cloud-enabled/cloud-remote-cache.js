const a2_0x474f=['waitForStoreRequestsToComplete','storage','runContext','next','api','__esModule','Nx\x20Cloud:\x20Cache\x20miss\x20','apply','fileStorage','all','note','hashUrls','scheduledTasks','then','filter','cacheError','store','extractErrorMessage','NX_CLOUD_DISTRIBUTED_EXECUTION_ID','.\x20Read\x20only\x20token\x20is\x20used.','reduce','messages','status','get','statuses','put','storeRequests','resolve','requests','.\x20Status\x20404.','VERBOSE_LOGGING','axiosException','done','response','push','cache-miss','map','defineProperty','hash','remote-cache-hit','value','../../../utilities/environment','startRun'];(function(_0x4527dd,_0x474f62){const _0x49c26a=function(_0x57b03d){while(--_0x57b03d){_0x4527dd['push'](_0x4527dd['shift']());}};_0x49c26a(++_0x474f62);}(a2_0x474f,0x186));const a2_0x49c2=function(_0x4527dd,_0x474f62){_0x4527dd=_0x4527dd-0x0;let _0x49c26a=a2_0x474f[_0x4527dd];return _0x49c26a;};'use strict';var __awaiter=this&&this['__awaiter']||function(_0x460e53,_0x2705aa,_0x23c62e,_0x53c5df){function _0x3c3818(_0x770cf4){return _0x770cf4 instanceof _0x23c62e?_0x770cf4:new _0x23c62e(function(_0x3e42ab){_0x3e42ab(_0x770cf4);});}return new(_0x23c62e||(_0x23c62e=Promise))(function(_0x52704b,_0x262fbd){function _0x3aee18(_0x2ce4f4){try{_0x5d6062(_0x53c5df[a2_0x49c2('0x0')](_0x2ce4f4));}catch(_0x5ad799){_0x262fbd(_0x5ad799);}}function _0x5cbac6(_0x1693b8){try{_0x5d6062(_0x53c5df['throw'](_0x1693b8));}catch(_0x20ff2d){_0x262fbd(_0x20ff2d);}}function _0x5d6062(_0x475fe8){_0x475fe8[a2_0x49c2('0x1d')]?_0x52704b(_0x475fe8[a2_0x49c2('0x25')]):_0x3c3818(_0x475fe8[a2_0x49c2('0x25')])[a2_0x49c2('0xa')](_0x3aee18,_0x5cbac6);}_0x5d6062((_0x53c5df=_0x53c5df[a2_0x49c2('0x4')](_0x460e53,_0x2705aa||[]))[a2_0x49c2('0x0')]());});};Object[a2_0x49c2('0x22')](exports,a2_0x49c2('0x2'),{'value':!![]});exports['CloudRemoteCache']=void 0x0;const environment_1=require(a2_0x49c2('0x26'));const {output}=require('../../../utilities/nx-imports');class CloudRemoteCache{constructor(_0x2ba945,_0x491d9f,_0x4bbde3,_0x1aab89){this[a2_0x49c2('0x12')]=_0x2ba945;this[a2_0x49c2('0x1')]=_0x491d9f;this[a2_0x49c2('0x2a')]=_0x4bbde3;this[a2_0x49c2('0x5')]=_0x1aab89;this[a2_0x49c2('0x17')]=[];}['retrieve'](_0x5a48df,_0x567ab8){var _0xf0a39b;return __awaiter(this,void 0x0,void 0x0,function*(){if(this[a2_0x49c2('0x12')]['cacheError'])return![];const _0x1bdaa6=yield this[a2_0x49c2('0x8')](_0x5a48df);if(!_0x1bdaa6||!_0x1bdaa6[a2_0x49c2('0x14')]){if(environment_1[a2_0x49c2('0x1b')]){output[a2_0x49c2('0x7')]({'title':a2_0x49c2('0x3')+_0x5a48df+'.'});}this[a2_0x49c2('0x2a')][a2_0x49c2('0x15')][_0x5a48df]=a2_0x49c2('0x20');return![];}try{yield this[a2_0x49c2('0x5')]['retrieve'](_0x5a48df,_0x1bdaa6['get'],_0x567ab8);this['runContext']['statuses'][_0x5a48df]=a2_0x49c2('0x24');return!![];}catch(_0x1c1495){const _0x11ce9c=(_0xf0a39b=_0x1c1495[a2_0x49c2('0x1c')])!==null&&_0xf0a39b!==void 0x0?_0xf0a39b:_0x1c1495;if(_0x11ce9c[a2_0x49c2('0x1e')]&&_0x11ce9c[a2_0x49c2('0x1e')][a2_0x49c2('0x13')]===0x194){if(environment_1[a2_0x49c2('0x1b')]){output[a2_0x49c2('0x7')]({'title':'Nx\x20Cloud:\x20Cache\x20miss\x20'+_0x5a48df+a2_0x49c2('0x1a')});}}else{this[a2_0x49c2('0x12')][a2_0x49c2('0xc')]=this[a2_0x49c2('0x12')][a2_0x49c2('0xe')](_0x11ce9c,a2_0x49c2('0x29'));}this['runContext'][a2_0x49c2('0x15')][_0x5a48df]=a2_0x49c2('0x20');return![];}});}[a2_0x49c2('0xd')](_0x5464fb,_0x158f12){return __awaiter(this,void 0x0,void 0x0,function*(){if(this[a2_0x49c2('0x12')][a2_0x49c2('0xc')])return![];const _0x5ee611=Promise[a2_0x49c2('0x18')]()['then'](()=>__awaiter(this,void 0x0,void 0x0,function*(){var _0x1991fc;const _0x183782=yield this[a2_0x49c2('0x8')](_0x5464fb);if(!_0x183782)return![];if(!_0x183782[a2_0x49c2('0x16')]){if(environment_1[a2_0x49c2('0x1b')]){output[a2_0x49c2('0x7')]({'title':'Nx\x20Cloud:\x20Skipping\x20storing\x20'+_0x5464fb+a2_0x49c2('0x10')});}return!![];}try{yield this[a2_0x49c2('0x5')][a2_0x49c2('0xd')](_0x5464fb,_0x183782['put'],_0x158f12);return!![];}catch(_0x45fd09){const _0x10db86=(_0x1991fc=_0x45fd09[a2_0x49c2('0x1c')])!==null&&_0x1991fc!==void 0x0?_0x1991fc:_0x45fd09;this['messages']['cacheError']=this[a2_0x49c2('0x12')][a2_0x49c2('0xe')](_0x10db86,'storage');return![];}}));this['storeRequests']['push'](_0x5ee611);return _0x5ee611;});}[a2_0x49c2('0x8')](_0x8a3fc0){return __awaiter(this,void 0x0,void 0x0,function*(){if(_0x8a3fc0 in this['runContext'][a2_0x49c2('0x19')]){return(yield this[a2_0x49c2('0x2a')]['requests'][_0x8a3fc0])[_0x8a3fc0];}else{const _0x118518=this[a2_0x49c2('0x2a')][a2_0x49c2('0x9')][a2_0x49c2('0xb')](_0x1760c5=>!this[a2_0x49c2('0x2a')][a2_0x49c2('0x19')][_0x1760c5[a2_0x49c2('0x23')]])[a2_0x49c2('0x21')](_0x1e1119=>_0x1e1119[a2_0x49c2('0x23')]);if(_0x118518['indexOf'](_0x8a3fc0)===-0x1){_0x118518[a2_0x49c2('0x1f')](_0x8a3fc0);}const _0xa7e663=this[a2_0x49c2('0x1')][a2_0x49c2('0x27')](environment_1[a2_0x49c2('0xf')],_0x118518);_0x118518['forEach'](_0x55c802=>{this[a2_0x49c2('0x2a')][a2_0x49c2('0x19')][_0x55c802]=_0xa7e663;});return(yield _0xa7e663)[_0x8a3fc0];}});}[a2_0x49c2('0x28')](){return Promise[a2_0x49c2('0x6')](this['storeRequests'])[a2_0x49c2('0xa')](_0x3c99d4=>_0x3c99d4[a2_0x49c2('0x11')]((_0x54b843,_0x454b81)=>_0x54b843&&_0x454b81,!![]));}}exports['CloudRemoteCache']=CloudRemoteCache;