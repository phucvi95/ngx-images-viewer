const a7_0x3466=['stringify','target','../../../utilities/environment','Starting\x20a\x20distributed\x20execution','createMetricRecorder','axiosMultipleTries','/nx-cloud/executions/start','true','/nx-cloud/executions/complete-run-group','error','hash','value','createStartRequest','dteStart','createApiAxiosInstance','exit','response','../../../utilities/metric-logger','completeRunGroupWithError','../../../utilities/nx-imports','DistributedExecutionApi','axiosException','enabled','apiAxiosInstance','next','Workspace\x20is\x20disabled.\x20Cannot\x20perform\x20distributed\x20task\x20executions.','RUNNER_FAILURE_PERF_ENTRY','false','data','post','error:\x20','mapRespToPerfEntry','__esModule','../../../utilities/axios','configuration','maxParallel','message','NX_CLOUD_DISTRIBUTED_EXECUTION_AGENT_COUNT','start','parseCommand','recordMetric','__awaiter','stopAgentsOnFailure','serializeOverrides','/nx-cloud/executions/status','map','getBranch','parallel','defineProperty','agentCount','VERBOSE_LOGGING'];(function(_0x57f451,_0x3466d9){const _0x25fcc6=function(_0x2dde49){while(--_0x2dde49){_0x57f451['push'](_0x57f451['shift']());}};_0x25fcc6(++_0x3466d9);}(a7_0x3466,0x1d5));const a7_0x25fc=function(_0x57f451,_0x3466d9){_0x57f451=_0x57f451-0x0;let _0x25fcc6=a7_0x3466[_0x57f451];return _0x25fcc6;};'use strict';var __awaiter=this&&this[a7_0x25fc('0x1f')]||function(_0x14623a,_0x570c43,_0x9a9bbc,_0x44e372){function _0x23dbc6(_0x307151){return _0x307151 instanceof _0x9a9bbc?_0x307151:new _0x9a9bbc(function(_0x26fbeb){_0x26fbeb(_0x307151);});}return new(_0x9a9bbc||(_0x9a9bbc=Promise))(function(_0x3d51cc,_0x500f5e){function _0x58649a(_0x4ddbda){try{_0x47e55a(_0x44e372[a7_0x25fc('0xe')](_0x4ddbda));}catch(_0xebd3fe){_0x500f5e(_0xebd3fe);}}function _0x106501(_0x289c3c){try{_0x47e55a(_0x44e372['throw'](_0x289c3c));}catch(_0x560d6d){_0x500f5e(_0x560d6d);}}function _0x47e55a(_0x59ae12){_0x59ae12['done']?_0x3d51cc(_0x59ae12[a7_0x25fc('0x1')]):_0x23dbc6(_0x59ae12[a7_0x25fc('0x1')])['then'](_0x58649a,_0x106501);}_0x47e55a((_0x44e372=_0x44e372['apply'](_0x14623a,_0x570c43||[]))[a7_0x25fc('0xe')]());});};Object[a7_0x25fc('0x26')](exports,a7_0x25fc('0x16'),{'value':!![]});exports['createStartRequest']=exports[a7_0x25fc('0xa')]=void 0x0;const axios_1=require(a7_0x25fc('0x17'));const environment_1=require(a7_0x25fc('0x2b'));const metric_logger_1=require(a7_0x25fc('0x7'));const serializer_overrides_1=require('../../../utilities/serializer-overrides');const {output}=require(a7_0x25fc('0x9'));class DistributedExecutionApi{constructor(_0x213eec){this[a7_0x25fc('0xd')]=(0x0,axios_1[a7_0x25fc('0x4')])(_0x213eec);}[a7_0x25fc('0x1c')](_0x3a6e05){var _0x503a2a;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x37dd2c=(0x0,metric_logger_1[a7_0x25fc('0x2d')])(a7_0x25fc('0x3'));let _0x456cb0;if(environment_1[a7_0x25fc('0x28')]){output['note']({'title':a7_0x25fc('0x2c'),'bodyLines':[JSON[a7_0x25fc('0x29')](_0x3a6e05,null,0x2)]});}try{_0x456cb0=yield(0x0,axios_1[a7_0x25fc('0x2e')])(()=>this[a7_0x25fc('0xd')][a7_0x25fc('0x13')](a7_0x25fc('0x2f'),_0x3a6e05));_0x37dd2c[a7_0x25fc('0x1e')]((0x0,metric_logger_1['mapRespToPerfEntry'])(_0x456cb0));}catch(_0x2c4e0c){_0x37dd2c[a7_0x25fc('0x1e')](((_0x503a2a=_0x2c4e0c===null||_0x2c4e0c===void 0x0?void 0x0:_0x2c4e0c[a7_0x25fc('0xb')])===null||_0x503a2a===void 0x0?void 0x0:_0x503a2a[a7_0x25fc('0x6')])?(0x0,metric_logger_1[a7_0x25fc('0x15')])(_0x2c4e0c[a7_0x25fc('0xb')]['response']):metric_logger_1['RUNNER_FAILURE_PERF_ENTRY']);throw _0x2c4e0c;}if(!_0x456cb0[a7_0x25fc('0x12')][a7_0x25fc('0xc')]){throw new Error(a7_0x25fc('0xf'));}if(_0x456cb0['data'][a7_0x25fc('0x32')]){throw new Error(_0x456cb0['data']['error']);}return _0x456cb0['data']['id'];});}['status'](_0x5a8ea0){var _0x7f5ae5;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x1ccc38=(0x0,metric_logger_1[a7_0x25fc('0x2d')])('dteStatus');try{const _0x213516=yield(0x0,axios_1[a7_0x25fc('0x2e')])(()=>this[a7_0x25fc('0xd')][a7_0x25fc('0x13')](a7_0x25fc('0x22'),{'id':_0x5a8ea0}));_0x1ccc38[a7_0x25fc('0x1e')]((0x0,metric_logger_1[a7_0x25fc('0x15')])(_0x213516));return _0x213516[a7_0x25fc('0x12')];}catch(_0x51fd41){_0x1ccc38['recordMetric'](((_0x7f5ae5=_0x51fd41===null||_0x51fd41===void 0x0?void 0x0:_0x51fd41[a7_0x25fc('0xb')])===null||_0x7f5ae5===void 0x0?void 0x0:_0x7f5ae5[a7_0x25fc('0x6')])?(0x0,metric_logger_1[a7_0x25fc('0x15')])(_0x51fd41[a7_0x25fc('0xb')][a7_0x25fc('0x6')]):metric_logger_1[a7_0x25fc('0x10')]);output['error']({'title':_0x51fd41[a7_0x25fc('0x1a')]});process[a7_0x25fc('0x5')](0x1);}});}[a7_0x25fc('0x8')](_0x240f8e,_0x2dfed3){var _0x4a0b6d;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x447cea=(0x0,metric_logger_1['createMetricRecorder'])('completeRunGroup');if(environment_1['VERBOSE_LOGGING']){output['note']({'title':'Completing\x20run\x20group\x20with\x20an\x20error','bodyLines':['runGroup:\x20'+_0x240f8e,a7_0x25fc('0x14')+_0x2dfed3]});}try{const _0x3e2d5f=yield(0x0,axios_1[a7_0x25fc('0x2e')])(()=>this['apiAxiosInstance'][a7_0x25fc('0x13')](a7_0x25fc('0x31'),{'runGroup':_0x240f8e,'criticalErrorMessage':_0x2dfed3}),0x3);_0x447cea['recordMetric']((0x0,metric_logger_1[a7_0x25fc('0x15')])(_0x3e2d5f));}catch(_0x557860){_0x447cea['recordMetric'](((_0x4a0b6d=_0x557860===null||_0x557860===void 0x0?void 0x0:_0x557860[a7_0x25fc('0xb')])===null||_0x4a0b6d===void 0x0?void 0x0:_0x4a0b6d[a7_0x25fc('0x6')])?(0x0,metric_logger_1[a7_0x25fc('0x15')])(_0x557860[a7_0x25fc('0xb')][a7_0x25fc('0x6')]):metric_logger_1['RUNNER_FAILURE_PERF_ENTRY']);}});}}exports[a7_0x25fc('0xa')]=DistributedExecutionApi;function createStartRequest(_0x5775be,_0x520585,_0xec9a7){const _0x34652c=_0x520585[a7_0x25fc('0x23')](_0x2bdeb6=>{return _0x2bdeb6[a7_0x25fc('0x23')](_0x46ab67=>{return{'taskId':_0x46ab67['id'],'hash':_0x46ab67[a7_0x25fc('0x0')],'projectName':_0x46ab67[a7_0x25fc('0x2a')]['project'],'target':_0x46ab67['target'][a7_0x25fc('0x2a')],'configuration':_0x46ab67[a7_0x25fc('0x2a')][a7_0x25fc('0x18')]||null,'params':(0x0,serializer_overrides_1[a7_0x25fc('0x21')])(_0x46ab67)};});});const _0x12c0ba={'command':(0x0,environment_1[a7_0x25fc('0x1d')])(),'branch':(0x0,environment_1[a7_0x25fc('0x24')])(),'runGroup':_0x5775be,'tasks':_0x34652c,'maxParallel':calculateMaxParallel(_0xec9a7)};if(environment_1['NX_CLOUD_DISTRIBUTED_EXECUTION_AGENT_COUNT']){_0x12c0ba[a7_0x25fc('0x27')]=environment_1[a7_0x25fc('0x1b')];}if(!environment_1['NX_CLOUD_DISTRIBUTED_EXECUTION_STOP_AGENTS_ON_FAILURE']){_0x12c0ba[a7_0x25fc('0x20')]=![];}return _0x12c0ba;}exports[a7_0x25fc('0x2')]=createStartRequest;function calculateMaxParallel(_0x57cbac){if(_0x57cbac[a7_0x25fc('0x25')]===a7_0x25fc('0x11')||_0x57cbac[a7_0x25fc('0x25')]===![]){return 0x1;}else if(_0x57cbac[a7_0x25fc('0x25')]===a7_0x25fc('0x30')||_0x57cbac[a7_0x25fc('0x25')]===!![]){return Number(_0x57cbac[a7_0x25fc('0x19')]||0x3);}else if(_0x57cbac[a7_0x25fc('0x25')]===undefined){return _0x57cbac[a7_0x25fc('0x19')]?Number(_0x57cbac[a7_0x25fc('0x19')]):0x3;}else{return Number(_0x57cbac[a7_0x25fc('0x25')])||0x3;}}